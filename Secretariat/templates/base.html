<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Secretariat | Crimson Scheduler{% endblock %}</title>
    <style>
      :root {
        --bg: #f8fafc;
        --surface: #ffffff;
        --border: #e2e8f0;
        --text-primary: #0f172a;
        --text-secondary: #475569;
        --muted: #94a3b8;
        --teal: #0f766e;
        --teal-hover: #115e59;
        --wsu-crimson: #981e32;
        --wsu-crimson-hover: #7a1829;
        --danger: #b91c1c;

        --space-1: 8px;
        --space-2: 16px;
        --space-3: 24px;
        --space-4: 32px;
        --space-5: 48px;
        --space-6: 64px;

        --radius-card: 16px;
        --radius-step: 14px;
        --radius-btn: 10px;
      }

      * {
        box-sizing: border-box;
      }

      .is-hidden {
        display: none !important;
      }

      body {
        margin: 0;
        min-height: 100vh;
        color: var(--text-primary);
        font-family: Inter, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        background-color: var(--bg);
        background-image:
          radial-gradient(circle at 8% 5%, #0f766e12 0%, #0f766e00 28%),
          radial-gradient(circle at 92% 0%, #0f172a0d 0%, #0f172a00 22%);
      }

      .page {
        width: min(1248px, calc(100% - 192px));
        margin: 0 auto;
        padding: var(--space-3) 0 var(--space-6);
      }

      .top-nav {
        height: 72px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: var(--space-2);
        margin-bottom: var(--space-5);
        position: relative;
      }

      .brand {
        display: inline-flex;
        align-items: center;
        gap: 14px;
        color: var(--text-primary);
        text-decoration: none;
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        padding: 0;
      }

      .brand:hover {
        color: #1e293b;
      }

      .brand-mark {
        width: 58px;
        height: 58px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }

      .brand-logo {
        width: 58px;
        height: 58px;
        object-fit: contain;
        filter: drop-shadow(0 6px 12px #00000022);
      }

      .brand-copy {
        display: grid;
        gap: 3px;
      }

      .brand-name {
        margin: 0;
        font-size: 1.2rem;
        line-height: 1;
        font-weight: 700;
        letter-spacing: 0.01em;
      }

      .brand-tagline {
        margin: 0;
        font-size: 0.66rem;
        line-height: 1;
        font-weight: 700;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: var(--wsu-crimson);
      }

      body.landing-page .brand {
        gap: 16px;
      }

      body.landing-page .brand-mark {
        width: 84px;
        height: 84px;
      }

      body.landing-page .brand-logo {
        width: 84px;
        height: 84px;
      }

      body.landing-page .brand-name {
        font-size: 1.45rem;
      }

      body.landing-page .brand-tagline {
        font-size: 0.74rem;
        letter-spacing: 0.1em;
      }

      .nav-actions {
        display: flex;
        gap: var(--space-2);
        align-items: center;
        margin-left: auto;
      }

      .inline-form {
        margin: 0;
      }

      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        min-height: 44px;
        padding: 12px 16px;
        border-radius: var(--radius-btn);
        border: 1px solid transparent;
        text-decoration: none;
        font-size: 14px;
        line-height: 20px;
        font-weight: 600;
        cursor: pointer;
      }

      .btn-primary {
        background: var(--wsu-crimson);
        color: #ffffff;
      }

      .btn-primary:hover {
        background: var(--wsu-crimson-hover);
      }

      .btn-secondary {
        background: var(--surface);
        color: var(--text-secondary);
        border-color: var(--border);
      }

      .btn-secondary:hover {
        color: var(--text-primary);
      }

      a.button,
      button.button {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        min-height: 44px;
        padding: 12px 16px;
        border-radius: var(--radius-btn);
        border: 1px solid transparent;
        text-decoration: none;
        font-size: 14px;
        line-height: 20px;
        font-weight: 600;
        cursor: pointer;
        background: var(--wsu-crimson);
        color: #ffffff;
      }

      a.button:hover,
      button.button:hover {
        background: var(--wsu-crimson-hover);
      }

      .card,
      .panel {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: var(--radius-card);
        padding: var(--space-5);
        box-shadow: 0 6px 24px #0f172a0a;
      }

      .hero-card {
        width: min(100%, 960px);
        margin: 0 auto;
      }

      .hero-centered {
        text-align: center;
      }

      .hero-centered .body-copy {
        margin-left: auto;
        margin-right: auto;
      }

      .hero-centered .hero-actions {
        align-items: center;
      }

      .hero-title-break {
        display: block;
      }

      .eyebrow {
        margin: 0 0 var(--space-2);
        color: var(--text-primary);
        font-size: 12px;
        line-height: 16px;
        font-weight: 500;
        letter-spacing: 0.08em;
        text-transform: uppercase;
      }

      h1,
      .h1 {
        margin: 0;
        font-size: 44px;
        line-height: 52px;
        font-weight: 600;
        letter-spacing: -0.015em;
      }

      h2,
      .h2 {
        margin: 0;
        font-size: 24px;
        line-height: 32px;
        font-weight: 600;
      }

      p,
      li {
        margin: 0;
        font-size: 16px;
        line-height: 26px;
        color: var(--text-secondary);
      }

      .body-copy {
        max-width: 66ch;
      }

      .section {
        margin-top: var(--space-4);
      }

      .section-title {
        margin-bottom: var(--space-3);
      }

      .hero-actions {
        margin-top: var(--space-4);
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-2);
      }

      .link-inline {
        color: var(--text-secondary);
        text-decoration: none;
        font-size: 14px;
        line-height: 20px;
        font-weight: 500;
      }

      .link-inline:hover {
        color: var(--text-primary);
      }

      .step-grid {
        display: grid;
        grid-template-columns: repeat(4, minmax(0, 1fr));
        gap: var(--space-3);
      }

      .step-card {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: var(--radius-step);
        padding: 20px;
        display: grid;
        gap: 10px;
      }

      .step-label {
        margin: 0;
        color: var(--muted);
        font-size: 12px;
        line-height: 16px;
        font-weight: 600;
      }

      .step-title {
        margin: 0;
        font-size: 16px;
        line-height: 24px;
        font-weight: 600;
      }

      .split-card {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: var(--space-4);
      }

      .split-title {
        margin: 0 0 var(--space-2);
        font-size: 16px;
        line-height: 24px;
        font-weight: 600;
      }

      .clean-list {
        margin: 0;
        padding-left: 18px;
        display: grid;
        gap: var(--space-1);
      }

      .footer {
        margin-top: var(--space-6);
        color: var(--muted);
        font-size: 14px;
        line-height: 20px;
      }

      .flash-stack {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        gap: 10px;
        margin: calc(var(--space-5) * -1 + 12px) 0 var(--space-3);
      }

      .flash {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        width: fit-content;
        max-width: min(100%, 620px);
        border: 1px solid #d4dde9;
        border-radius: 999px;
        padding: 10px 16px 10px 12px;
        font-size: 14px;
        line-height: 18px;
        font-weight: 600;
        color: #334155;
        background:
          linear-gradient(
            180deg,
            #ffffff 0%,
            #f8fafc 100%
          );
        box-shadow:
          0 8px 24px -18px #0f172a80,
          0 2px 10px -8px #0f172a66;
        animation: flash-in 180ms ease-out;
        transition: opacity 200ms ease, transform 200ms ease;
      }

      .flash::before {
        content: "i";
        display: inline-grid;
        place-items: center;
        width: 20px;
        height: 20px;
        border-radius: 999px;
        font-size: 12px;
        font-weight: 700;
        flex-shrink: 0;
        color: #334155;
        background: #e2e8f0;
      }

      .flash.success {
        border-color: #0f766e44;
        color: #0f766e;
        background:
          linear-gradient(
            180deg,
            #f0fdfa 0%,
            #ccfbf1 100%
          );
      }

      .flash.success::before {
        content: "âœ“";
        color: #0f766e;
        background: #ccfbf1;
      }

      .flash.error {
        border-color: #b91c1c44;
        color: var(--danger);
        background:
          linear-gradient(
            180deg,
            #fff1f2 0%,
            #ffe4e6 100%
          );
      }

      .flash.error::before {
        content: "!";
        color: #991b1b;
        background: #fecdd3;
      }

      .flash.is-dismissing {
        opacity: 0;
        transform: translateY(-6px) scale(0.98);
        pointer-events: none;
      }

      @keyframes flash-in {
        from {
          opacity: 0;
          transform: translateY(-8px) scale(0.98);
        }

        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      @media (max-width: 720px) {
        .flash-stack {
          align-items: stretch;
          margin-top: calc(var(--space-5) * -1 + 6px);
        }

        .flash {
          width: 100%;
          border-radius: 14px;
          justify-content: flex-start;
        }
      }

      @media (prefers-reduced-motion: reduce) {
        .flash {
          animation: none;
          transition: none;
        }

        .flash.is-dismissing {
          transform: none;
        }
      }

      .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: var(--space-2);
      }

      .field {
        display: grid;
        gap: 6px;
      }

      .field-label {
        font-size: 14px;
        line-height: 20px;
        font-weight: 600;
        color: var(--text-secondary);
      }

      .field input,
      .field select {
        width: 100%;
        min-height: 44px;
        padding: 10px 12px;
        border-radius: 10px;
        border: 1px solid var(--border);
        color: var(--text-primary);
        background: var(--surface);
        font-size: 16px;
        line-height: 24px;
      }

      .slot-grid {
        margin-top: var(--space-3);
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
        gap: 12px;
      }

      .slot-btn {
        min-height: 48px;
        border-radius: 12px;
        border: 1px solid #981e3288;
        background: var(--surface);
        color: var(--text-primary);
        font-size: 14px;
        line-height: 20px;
        font-weight: 600;
        cursor: pointer;
      }

      .slot-btn.is-selected {
        background: var(--wsu-crimson);
        color: #ffffff;
      }

      .business-grid {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: var(--space-2);
      }

      .business-card {
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: var(--space-2);
        display: grid;
        gap: var(--space-1);
        background: var(--surface);
      }

      .business-card.is-selected {
        border-color: #981e3299;
        box-shadow: inset 0 0 0 1px #981e3240;
        background: #fff7f8;
      }

      .business-head {
        display: grid;
        gap: 2px;
      }

      .business-name {
        margin: 0;
        font-size: 18px;
        line-height: 24px;
        font-weight: 600;
      }

      .business-location {
        margin: 0;
        font-size: 13px;
        line-height: 18px;
        color: var(--muted);
      }

      .business-services {
        margin: 0;
        padding-left: 18px;
        display: grid;
        gap: 4px;
      }

      .business-services li {
        font-size: 14px;
        line-height: 20px;
      }

      .calendar-meta {
        margin-top: var(--space-1);
      }

      #schedule-detail-panel {
        transition: opacity 140ms ease-in-out;
      }

      #schedule-detail-panel.is-loading {
        opacity: 0.58;
        pointer-events: none;
      }

      .day-strip {
        display: grid;
        grid-template-columns: repeat(7, minmax(0, 1fr));
        gap: 10px;
      }

      .day-pill {
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 10px;
        text-decoration: none;
        background: var(--surface);
        display: grid;
        gap: 4px;
        cursor: pointer;
        transition:
          border-color 140ms ease-in-out,
          box-shadow 140ms ease-in-out,
          transform 140ms ease-in-out;
      }

      .day-pill:hover {
        border-color: #981e3260;
        box-shadow: 0 6px 16px #0f172a12;
        transform: translateY(-1px);
      }

      .day-pill:focus-visible {
        outline: 2px solid #0f766e;
        outline-offset: 2px;
      }

      .day-pill.is-selected {
        border-color: var(--wsu-crimson);
        box-shadow: inset 0 0 0 1px #981e3240;
      }

      .day-pill-weekday {
        color: var(--muted);
        font-size: 12px;
        line-height: 16px;
        font-weight: 600;
      }

      .day-pill-day {
        color: var(--text-primary);
        font-size: 18px;
        line-height: 22px;
        font-weight: 600;
      }

      .day-pill-status {
        font-size: 12px;
        line-height: 16px;
        font-weight: 600;
      }

      .day-pill--open .day-pill-status {
        color: #15803d;
      }

      .day-pill--limited .day-pill-status {
        color: #a16207;
      }

      .day-pill--full .day-pill-status {
        color: #b91c1c;
      }

      .day-pill--closed .day-pill-status {
        color: #475569;
      }

      .slot-legend {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
      }

      .timeline-panel {
        border: 1px solid var(--border);
        border-radius: 12px;
        background: #f8fafc;
        padding: 14px;
        display: grid;
        gap: 10px;
      }

      .timeline-title {
        margin: 0;
        color: var(--text-primary);
        font-size: 14px;
        line-height: 20px;
        font-weight: 600;
      }

      .timeline-row {
        display: grid;
        grid-template-columns: 72px 1fr;
        align-items: center;
        gap: 8px;
      }

      .timeline-label {
        margin: 0;
        color: var(--text-secondary);
        font-size: 12px;
        line-height: 16px;
        font-weight: 600;
      }

      .timeline-cells {
        display: grid;
        grid-auto-flow: column;
        grid-auto-columns: minmax(0, 1fr);
        gap: 4px;
      }

      .timeline-cell {
        height: 10px;
        border-radius: 999px;
        border: 1px solid var(--border);
        background: #ffffff;
      }

      .timeline-cell.is-free {
        border-color: #16a34a66;
        background: #dcfce7;
      }

      .timeline-cell.is-busy {
        border-color: #dc262655;
        background: #fee2e2;
      }

      .legend-item {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        color: var(--text-secondary);
        font-size: 14px;
        line-height: 20px;
      }

      .legend-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
      }

      .legend-dot--open {
        background: #16a34a;
      }

      .legend-dot--limited {
        background: #ca8a04;
      }

      .legend-dot--full {
        background: #dc2626;
      }

      .legend-dot--closed {
        background: #475569;
      }

      .legend-dot--slot-available {
        background: #16a34a;
      }

      .legend-dot--slot-user-busy {
        background: #1d4ed8;
      }

      .legend-dot--slot-business-busy {
        background: #dc2626;
      }

      .legend-dot--slot-both-busy {
        background: #9a3412;
      }

      .next-slot-panel {
        border: 1px solid var(--border);
        border-radius: 12px;
        background: #f8fafc;
        padding: 14px;
      }

      .next-slot-title {
        margin: 0 0 8px;
        color: var(--text-primary);
        font-size: 14px;
        line-height: 20px;
        font-weight: 600;
      }

      .next-slot-list {
        display: grid;
        gap: 6px;
      }

      .next-slot-item {
        margin: 0;
        color: var(--text-secondary);
        font-size: 14px;
        line-height: 20px;
      }

      .next-slot-empty {
        margin: 0;
        color: var(--muted);
        font-size: 14px;
        line-height: 20px;
      }

      .demo-slot-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(210px, 1fr));
        gap: 10px;
      }

      .demo-slot {
        width: 100%;
        min-height: 62px;
        border-radius: 12px;
        border: 1px solid var(--border);
        background: var(--surface);
        padding: 10px 12px;
        text-align: left;
        display: grid;
        gap: 2px;
      }

      .demo-slot span {
        color: var(--text-primary);
        font-size: 14px;
        line-height: 20px;
        font-weight: 600;
      }

      .demo-slot small {
        color: var(--muted);
        font-size: 12px;
        line-height: 16px;
      }

      .demo-slot.is-available {
        border-color: #16a34a66;
        background: #f0fdf4;
        cursor: pointer;
        transition:
          border-color 140ms ease-in-out,
          box-shadow 140ms ease-in-out,
          transform 140ms ease-in-out;
      }

      .demo-slot.is-available:hover {
        border-color: #16a34aaa;
        box-shadow: 0 8px 20px #16a34a1f;
        transform: translateY(-1px);
      }

      .demo-slot.is-available:focus-visible {
        outline: 2px solid #15803d;
        outline-offset: 2px;
      }

      .demo-slot.is-unavailable {
        border-color: #dc262655;
        background: #fef2f2;
      }

      .demo-slot.is-unavailable span,
      .demo-slot.is-unavailable small {
        color: #991b1b;
      }

      .demo-slot.is-user-busy {
        border-color: #1d4ed855;
        background: #eff6ff;
      }

      .demo-slot.is-user-busy span,
      .demo-slot.is-user-busy small {
        color: #1e3a8a;
      }

      .demo-slot.is-business-busy {
        border-color: #dc262655;
        background: #fef2f2;
      }

      .demo-slot.is-business-busy span,
      .demo-slot.is-business-busy small {
        color: #991b1b;
      }

      .demo-slot.is-both-busy {
        border-color: #9a341255;
        background: #fff7ed;
      }

      .demo-slot.is-both-busy span,
      .demo-slot.is-both-busy small {
        color: #7c2d12;
      }

      .event-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
        gap: 12px;
      }

      .event-card {
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 14px;
        background: var(--surface);
        display: grid;
        gap: 6px;
      }

      .event-title {
        margin: 0;
        color: var(--text-primary);
        font-size: 16px;
        line-height: 24px;
        font-weight: 600;
      }

      .event-time {
        margin: 0;
        color: var(--text-secondary);
        font-size: 14px;
        line-height: 20px;
      }

      .event-location {
        margin: 0;
        color: var(--muted);
        font-size: 13px;
        line-height: 18px;
      }

      .calendar-toolbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        flex-wrap: wrap;
      }

      .calendar-view-switch,
      .calendar-nav {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        flex-wrap: wrap;
      }

      .calendar-range-label {
        margin-top: 12px;
        color: var(--text-secondary);
        font-size: 14px;
        line-height: 20px;
        font-weight: 600;
      }

      .week-calendar {
        display: grid;
        grid-template-columns: repeat(7, minmax(0, 1fr));
        gap: 10px;
      }

      .week-column {
        border: 1px solid var(--border);
        border-radius: 12px;
        background: var(--surface);
        min-height: 300px;
        display: flex;
        flex-direction: column;
      }

      .week-column.is-today {
        border-color: #981e3299;
        box-shadow: inset 0 0 0 1px #981e3240;
      }

      .week-column-head {
        padding: 10px;
        border-bottom: 1px solid var(--border);
        background: #f8fafc;
        border-radius: 12px 12px 0 0;
        display: grid;
        gap: 2px;
      }

      .week-column-weekday {
        margin: 0;
        color: var(--text-primary);
        font-size: 14px;
        line-height: 20px;
        font-weight: 600;
      }

      .week-column-date {
        margin: 0;
        color: var(--muted);
        font-size: 12px;
        line-height: 16px;
      }

      .week-column-body {
        padding: 10px;
        display: grid;
        align-content: start;
        gap: 8px;
      }

      .week-event {
        border: 1px solid var(--border);
        border-radius: 10px;
        background: #ffffff;
        padding: 8px;
        display: grid;
        gap: 2px;
      }

      .week-event-time {
        margin: 0;
        color: var(--wsu-crimson);
        font-size: 12px;
        line-height: 16px;
        font-weight: 600;
      }

      .week-event-title {
        margin: 0;
        color: var(--text-primary);
        font-size: 14px;
        line-height: 20px;
        font-weight: 600;
      }

      .week-event-location {
        margin: 0;
        color: var(--muted);
        font-size: 12px;
        line-height: 16px;
      }

      .week-event-empty {
        margin: 0;
        color: var(--muted);
        font-size: 12px;
        line-height: 16px;
      }

      .month-weekday-row {
        display: grid;
        grid-template-columns: repeat(7, minmax(0, 1fr));
        gap: 10px;
      }

      .month-weekday {
        margin: 0;
        color: var(--muted);
        font-size: 12px;
        line-height: 16px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.06em;
      }

      .month-calendar {
        margin-top: 10px;
        display: grid;
        grid-template-columns: repeat(7, minmax(0, 1fr));
        gap: 10px;
      }

      .month-day {
        border: 1px solid var(--border);
        border-radius: 12px;
        background: var(--surface);
        min-height: 150px;
        display: flex;
        flex-direction: column;
      }

      .month-day.is-outside {
        background: #f8fafc;
      }

      .month-day.is-today {
        border-color: #981e3299;
        box-shadow: inset 0 0 0 1px #981e3240;
      }

      .month-day-head {
        padding: 8px 10px;
        border-bottom: 1px solid var(--border);
      }

      .month-day-number {
        margin: 0;
        color: var(--text-primary);
        font-size: 14px;
        line-height: 20px;
        font-weight: 600;
      }

      .month-day-body {
        padding: 8px;
        display: grid;
        align-content: start;
        gap: 6px;
      }

      .month-event {
        border: 1px solid var(--border);
        border-radius: 8px;
        background: #ffffff;
        padding: 6px;
        display: grid;
        gap: 2px;
      }

      .month-event-time {
        margin: 0;
        color: var(--wsu-crimson);
        font-size: 11px;
        line-height: 14px;
        font-weight: 600;
      }

      .month-event-title {
        margin: 0;
        color: var(--text-primary);
        font-size: 12px;
        line-height: 16px;
        font-weight: 600;
      }

      .month-event-more,
      .month-event-empty {
        margin: 0;
        color: var(--muted);
        font-size: 12px;
        line-height: 16px;
      }

      @media (max-width: 1100px) {
        .page {
          width: min(1248px, calc(100% - 96px));
        }

        .step-grid {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }

        .business-grid {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }

        .day-strip {
          grid-template-columns: repeat(4, minmax(0, 1fr));
        }

        .week-calendar {
          grid-template-columns: repeat(4, minmax(0, 1fr));
        }

        .month-weekday-row {
          grid-template-columns: repeat(4, minmax(0, 1fr));
        }

        .month-calendar {
          grid-template-columns: repeat(4, minmax(0, 1fr));
        }
      }

      @media (max-width: 760px) {
        .page {
          width: calc(100% - 32px);
          padding: var(--space-2) 0 var(--space-5);
        }

        .top-nav {
          height: auto;
          min-height: 72px;
          flex-wrap: wrap;
          row-gap: 10px;
          margin-bottom: var(--space-4);
        }

        .brand {
          position: static;
          left: auto;
          transform: none;
          margin-right: auto;
          padding: 0;
        }

        .brand-mark {
          width: 44px;
          height: 44px;
        }

        .brand-logo {
          width: 44px;
          height: 44px;
        }

        .brand-name {
          font-size: 1rem;
        }

        .brand-tagline {
          font-size: 0.6rem;
        }

        body.landing-page .brand-mark {
          width: 58px;
          height: 58px;
        }

        body.landing-page .brand-logo {
          width: 58px;
          height: 58px;
        }

        body.landing-page .brand-name {
          font-size: 1.1rem;
        }

        body.landing-page .brand-tagline {
          font-size: 0.64rem;
        }

        .nav-actions {
          width: 100%;
          justify-content: flex-end;
          flex-wrap: wrap;
          gap: 10px;
        }

        .card,
        .panel {
          padding: var(--space-3);
        }

        h1,
        .h1 {
          font-size: 34px;
          line-height: 40px;
        }

        .step-grid {
          grid-template-columns: 1fr;
        }

        .split-card {
          grid-template-columns: 1fr;
          gap: var(--space-3);
        }

        .business-grid {
          grid-template-columns: 1fr;
        }

        .day-strip {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }

        .week-calendar {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }

        .month-weekday-row {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }

        .month-calendar {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }
      }
    </style>
  </head>
  <body class="{% if request.endpoint == 'index' %}landing-page{% endif %}">
    <div class="page">
      <header class="top-nav">
        <a class="brand" href="{{ url_for('index') }}" aria-label="Secretariat home">
          <span class="brand-mark">
            <img
              class="brand-logo"
              src="{{ url_for('static', filename='images/secretariat-logo.png') }}"
              alt="Secretariat logo"
            />
          </span>
          <span class="brand-copy">
            <span class="brand-name">Secretariat</span>
            <span class="brand-tagline">WSU Crimson Scheduler</span>
          </span>
        </a>
        <nav class="nav-actions" aria-label="Primary">
          {% block nav_actions %}
            {% if google_authenticated %}
              <a
                class="btn {% if request.endpoint == 'home' %}btn-primary{% else %}btn-secondary{% endif %}"
                href="{{ url_for('home') }}"
              >
                Home
              </a>
              <a
                class="btn {% if request.endpoint == 'schedule' %}btn-primary{% else %}btn-secondary{% endif %}"
                href="{{ url_for('schedule') }}"
              >
                Schedule
              </a>
              <form class="inline-form" method="post" action="{{ url_for('auth.logout') }}">
                <button class="btn btn-secondary" type="submit">
                  Log Out
                </button>
              </form>
            {% else %}
              {% if request.endpoint != 'index' %}
                <a class="btn btn-secondary" href="{{ url_for('index') }}">
                  Landing
                </a>
              {% endif %}
              <form class="inline-form" method="post" action="{{ url_for('auth.login') }}">
                <input
                  type="hidden"
                  name="next"
                  value="{{ url_for('home') }}"
                />
                <button class="btn btn-primary" type="submit">
                  Login / Sign Up
                </button>
              </form>
            {% endif %}
          {% endblock %}
        </nav>
      </header>

      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <section class="flash-stack" aria-label="Notifications">
            {% for category, message in messages %}
              <div
                class="flash {{ category }}"
                role="{% if category == 'error' %}alert{% else %}status{% endif %}"
                aria-live="{% if category == 'error' %}assertive{% else %}polite{% endif %}"
              >
                {{ message }}
              </div>
            {% endfor %}
          </section>
        {% endif %}
      {% endwith %}

      <main>{% block content %}{% endblock %}</main>
    </div>
    <script>
      (() => {
        const flashStack = document.querySelector(".flash-stack");
        if (!flashStack) {
          return;
        }

        const flashes = flashStack.querySelectorAll(".flash");
        const defaultDurationMs = 3200;
        const errorDurationMs = 5200;
        const dismissDurationMs = 200;

        flashes.forEach((flash, index) => {
          const isError = flash.classList.contains("error");
          const delayMs = isError ? errorDurationMs : defaultDurationMs;
          const staggerMs = index * 120;

          window.setTimeout(() => {
            flash.classList.add("is-dismissing");

            window.setTimeout(() => {
              flash.remove();
              if (!flashStack.querySelector(".flash")) {
                flashStack.remove();
              }
            }, dismissDurationMs);
          }, delayMs + staggerMs);
        });
      })();
    </script>
  </body>
</html>
